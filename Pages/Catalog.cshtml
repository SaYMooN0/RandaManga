@page
@model RandaManga.Pages.CatalogModel

<script src="/js/catalog.js"></script>
<div class="catalogFilterDiv">
    <form method="post" asp-page-handler="FiltersApplied" class="allFiltersForm">
        <div class="tagsChoosingMode">
            <div class="tagsChoosingModeTopLayoutDiv">
                <svg onclick="tagsOnClickHandlerHide()" fill="#88495E" class="svgBackIcon" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-2.67 -2.67 32.02 32.02" xml:space="preserve" stroke="#88495E" stroke-width="0.00026676">
                <g id="SVGRepo_iconCarrier">
                <g>  <path d="M26.105,21.891c-0.229,0-0.439-0.131-0.529-0.346l0,0c-0.066-0.156-1.716-3.857-7.885-4.59 c-1.285-0.156-2.824-0.236-4.693-0.25v4.613c0,0.213-0.115,0.406-0.304,0.508c-0.188,0.098-0.413,0.084-0.588-0.033L0.254,13.815 C0.094,13.708,0,13.528,0,13.339c0-0.191,0.094-0.365,0.254-0.477l11.857-7.979c0.175-0.121,0.398-0.129,0.588-0.029 c0.19,0.102,0.303,0.295,0.303,0.502v4.293c2.578,0.336,13.674,2.33,13.674,11.674c0,0.271-0.191,0.508-0.459,0.562 C26.18,21.891,26.141,21.891,26.105,21.891z" /> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </g> </g>
            </svg>
                <button onclick="deleteAllTags()" class="deleteAllTagsButton">
                    Очистить теги
                </button>
            </div>
            <div class="tagsList">
                @foreach (string tag in Model.Filters.Tags.Keys)
                {
                    <div class="tagChoosingDiv">
                        <label class="tagChoosingLabel">@tag</label>
                        <input type="checkbox" asp-for="@Model.Filters.Tags[tag]" class="tagChoosingCheckBox">

                    </div>
                }
            </div>
            <div class="ButtonContainer">
                <button class="tagsChoosingModeBottomLayoutButton" type="submit">
                    Подтвердить
                </button>
            </div>
        </div>
        <div class="catalogFilterTagDiv" onclick="tagsOnClickHandlerShow()" id="catalogFilterTagDiv">
            <p class="filtersText">
                Теги
            </p>
            <svg class="svgTagAddIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#88495E" stroke-width="0.00024000000000000003">
                <g id="SVGRepo_iconCarrier">
                    <path fill-rule="evenodd" class="svgLine" clip-rule="evenodd" d="M12 3a1 1 0 0 0-1 1v7H4a1 1 0 1 0 0 2h7v7a1 1 0 1 0 2 0v-7h7a1 1 0 1 0 0-2h-7V4a1 1 0 0 0-1-1z" fill="#88495E" />
                </g>
            </svg>
        </div>
        <div id="allOtherFiltersDiv" class="allOtherFiltersDiv">

            <p class="formLabel">Год выпуска</p>
            <div class="yearRangeInput">
                <p class="auxiliaryText">от</p>
                <input type="text" class="yearInputField" asp-for="@Model.Filters.MinYear" />
                <p></p>
                <p class="auxiliaryText">до</p>
                <input type="text" class="yearInputField" asp-for="@Model.Filters.MaxYear" />
            </div>
            <p class="formLabel">Возрастной рейтинг</p>
            <div class="ageRaitingContainer">
                <p class="ageRaitingLabel">Отсутствует</p>
                <input asp-for="@Model.Filters.AgeRatingAbsent" class="ageRaitingCheckbox" />
                <p class="ageRaitingLabel">16+</p>
                <input asp-for="@Model.Filters.AgeRating16" class="ageRaitingCheckbox" />
                <p class="ageRaitingLabel">18+</p>
                <input asp-for="@Model.Filters.AgeRating18" class="ageRaitingCheckbox" />
            </div>
            <p class="formLabel">Тип</p>
            <div class="mangaTypeContainer">
                <p class="mangaTypeLabel">Манга</p>
                <input asp-for="@Model.Filters.Manga" class="ageRaitingCheckbox" />
                <p class="mangaTypeLabel">Манхва</p>
                <input asp-for="@Model.Filters.Manhwa" class="ageRaitingCheckbox" />
                <p class="mangaTypeLabel">Маньхуа</p>
                <input asp-for="@Model.Filters.Manhua" class="ageRaitingCheckbox" />
            </div>
            <div class="FormButtonsContainer">
                <button class="filterFormButtons" type="reset">
                    Очистить
                </button>
                <button class="filterFormButtons" type="submit">
                    Подтвердить
                </button>
            </div>

        </div>
    </form>
</div>
@if (Model.mangaListToShow.Count > 0)
{
    <div class="catalogContainer">
        @foreach (RandaManga.Models.Manga item in Model.mangaListToShow)
        {
            <a class="catalogMangaLink" asp-page="MangaPage" asp-route-id="@item.Id">
                <img src="@item.GetFullImagePath()" class="catalogImage">
                <p class="catalogMangaLabel">@item.Name</p>
            </a>

        }
    </div>
}
else
{
    <p class="notFoundLabel">Мы не нашли ни одной манги,манхвы или маньхуа, которые бы полностью соответствовали вашему выбору :( <br>Попробуйте немного поменять ваши фильтры</p>
}